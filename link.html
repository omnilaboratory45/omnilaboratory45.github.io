<!DOCTYPE HTML>
<html lang="ko-KR">
    <head>
        <meta charset="UTF-8">
        <script type="text/javascript">
            function getAlias() {
                const urlParams = new URLSearchParams(window.location.search);
                let alias = urlParams.get("to");
                return alias === null ? "index" : alias;
            }

            function getFullLink(alias) {
                fetch('./static/links.json')
                .then(res => res.json().data)
                .then(data => {
                    if (!(alias in data)) {
                        return null;
                    }
                    /** @type {string} */
                    const link = data[alias];
                    if (link.startsWith("https://") || link.startsWith("http://")) {
                        return link;
                    } else {
                        return link;
                    }
                });
            }

            function redirect(alias) {
                let link = getFullLink();
                if (link == null) {
                    link = "/";
                    // return whenFailed();
                }
                window.location.href = link;
                const message = `If you are not redirected automatically, follow this <a href="${link}">link</a>.`;
                document.getElementById("redirect").innerHTML = message;
            }

            function whenFailed() {
                const message = `Unknown alias. If you want to see full index of this website, go ahead <a href=".">here</a>.`
                document.getElementById("redirect").innerHTML = message;
            }

            redirect(getAlias());
        </script>
        <title>Page Redirection</title>
    </head>
    <body>
        <div id="redirect">Redirecting...</div>
        <noscript>
            Redirecting doesn't work without javascript.
            Redirect to homepage.
        </noscript>
    </body>
</html>